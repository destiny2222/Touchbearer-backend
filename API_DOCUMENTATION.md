## Event API

This document specifies how the Event feature works for frontend integration.

### Base Path

- All Event endpoints are mounted under: `/api/event`
- Example full URLs: `GET /api/event/events`, `POST /api/event/events`, `PUT /api/event/events/:eventId`, `DELETE /api/event/events/:eventId`

### Event Model

- Fields:
  - `id` (string, UUID v4) – generated by server on create
  - `name` (string, required)
  - `description` (string, required)
  - `branch_id` (string, UUID v4, required) – must reference an existing branch
  - `event_type` (string, required) – free-form category/type
  - `event_date` (string, required) – server stores as provided; prefer ISO 8601 (`YYYY-MM-DD` or full timestamp like `2025-08-31T10:00:00Z`)

Example object:

```json
{
  "id": "b1b9c2a4-2c1b-4f1f-a9b2-b2a1b3c4d5e6",
  "name": "Parent-Teacher Conference",
  "description": "Classroom meeting with parents",
  "branch_id": "6a0d9c1e-3b2a-4f5e-8d9c-1e2f3a4b5c6d",
  "event_type": "meeting",
  "event_date": "2025-09-12"
}
```

### Authentication

- These endpoints currently do not require authentication headers.
- If authentication is later added, pass `x-auth-token: <JWT>`.

### Endpoints

#### GET `/events`

- Returns all events.
- Query params: none
- Status: `200 OK`
- Response: `Event[]`

Example:

```js
const res = await fetch(`${API_BASE}/api/event/events`);
if (!res.ok) throw new Error("Failed to fetch events");
const events = await res.json();
```

#### POST `/events`

- Creates a new event.
- Headers: `Content-Type: application/json`
- Body (JSON): `{ name, description, branch_id, event_type, event_date }`
- Status: `201 Created`
- Response: `{ message: string, event: Event }`
- Validation: all fields required; `400` if any missing

Example:

```js
const payload = {
  name: "Orientation Day",
  description: "Welcome session for new students",
  branch_id: selectedBranchId, // UUID string
  event_type: "orientation",
  event_date: "2025-08-20", // prefer ISO 8601
};

const res = await fetch(`${API_BASE}/api/event/events`, {
  method: "POST",
  headers: { "Content-Type": "application/json" },
  body: JSON.stringify(payload),
});
if (res.status === 201) {
  const { event } = await res.json();
  // use event.id
}
```

#### PUT `/events/:eventId`

- Updates an existing event by `eventId`.
- Headers: `Content-Type: application/json`
- Body (JSON): `{ name, description, branch_id, event_type, event_date }` (all required)
- Status: `200 OK`
- Response: `{ message: string, event: Event }`
- Errors: `404` if event not found, `400` if body missing fields

Example:

```js
const res = await fetch(`${API_BASE}/api/event/events/${eventId}`, {
  method: "PUT",
  headers: { "Content-Type": "application/json" },
  body: JSON.stringify({
    name,
    description,
    branch_id,
    event_type,
    event_date,
  }),
});
if (res.ok) {
  const { event } = await res.json();
}
```

#### DELETE `/events/:eventId`

- Deletes an event by `eventId`.
- Status: `200 OK`
- Response: `{ message: string }`
- Errors: `404` if event not found

Example:

```js
const res = await fetch(`${API_BASE}/api/event/events/${eventId}`, {
  method: "DELETE",
});
if (!res.ok) throw new Error("Failed to delete");
```

### Notes & Constraints

- Sorting/Pagination: not provided by the API; client should sort or paginate locally if needed.
- `event_date`: no server-side format validation; for interoperability, prefer ISO 8601 strings.
- `branch_id`: must be a valid UUID for an existing branch. Fetch branches from `GET /api/branches` to populate selections.
- Error shapes: `{ message: string }` for `4xx/5xx` responses.

### TypeScript Helper Types (optional on the client)

```ts
export type Event = {
  id: string;
  name: string;
  description: string;
  branch_id: string;
  event_type: string;
  event_date: string; // ISO 8601 recommended
};
```
